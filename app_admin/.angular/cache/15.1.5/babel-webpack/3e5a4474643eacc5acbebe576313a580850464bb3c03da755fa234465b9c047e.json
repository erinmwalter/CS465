{"ast":null,"code":"import { FormGroup, Validators } from \"@angular/forms\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../services/trip-data.service\";\nexport class EditTripComponent {\n  constructor(router, formBuilder, tripService) {\n    this.router = router;\n    this.formBuilder = formBuilder;\n    this.tripService = tripService;\n    this.editForm = new FormGroup({});\n    this.submitted = false;\n  }\n  ngOnInit() {\n    // retrieve stashed tripId\n    let tripCode = localStorage.getItem(\"tripCode\");\n    if (!tripCode) {\n      alert(\"Something wrong, couldn't find where I stashed tripCode!\");\n      this.router.navigate(['']);\n      return;\n    }\n    console.log('EditTripComponent#onInit found tripCode ' + tripCode);\n    // initialize form\n    this.editForm = this.formBuilder.group({\n      _id: [],\n      code: [tripCode, Validators.required],\n      name: ['', Validators.required],\n      length: ['', Validators.required],\n      start: ['', Validators.required],\n      resort: ['', Validators.required],\n      perPerson: ['', Validators.required],\n      image: ['', Validators.required],\n      description: ['', Validators.required]\n    });\n    console.log('[EditTripComponent.onInit calling TripDataService.getTrip(\\'' + tripCode + '\\')');\n    this.tripService.getTrip(tripCode).then(data => {\n      console.log(data);\n      this.editForm.patchValue(data[0]);\n    });\n  }\n  onSubmit() {\n    this.submitted = true;\n    if (this.editForm.valid) {\n      this.tripService.updateTrip(this.editForm.value).then(data => {\n        console.log(data);\n        this.router.navigate(['']);\n      });\n    }\n  }\n}\nEditTripComponent.ɵfac = function EditTripComponent_Factory(t) {\n  return new (t || EditTripComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i3.TripDataService));\n};\nEditTripComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: EditTripComponent,\n  selectors: [[\"app-edit-trip\"]],\n  decls: 2,\n  vars: 0,\n  template: function EditTripComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"p\");\n      i0.ɵɵtext(1, \"edit-trip works!\");\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AAGA,SAAsBA,SAAS,EAAEC,UAAU,QAAQ,gBAAgB;;;;;AAQnE,OAAM,MAAOC,iBAAiB;EAI5BC,YAAoBC,MAAc,EAAUC,WAAwB,EAAUC,WAA4B;IAAtF,WAAM,GAANF,MAAM;IAAkB,gBAAW,GAAXC,WAAW;IAAuB,gBAAW,GAAXC,WAAW;IAHzF,aAAQ,GAAc,IAAIN,SAAS,CAAM,EAAE,CAAC;IAC5C,cAAS,GAAG,KAAK;EAE4F;EAE/GO,QAAQ;IACJ;IACA,IAAIC,QAAQ,GAAGC,YAAY,CAACC,OAAO,CAAC,UAAU,CAAC;IAC/C,IAAI,CAACF,QAAQ,EAAE;MACbG,KAAK,CAAC,0DAA0D,CAAC;MACjE,IAAI,CAACP,MAAM,CAACQ,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;MAC1B;;IAEFC,OAAO,CAACC,GAAG,CAAC,0CAA0C,GAAGN,QAAQ,CAAC;IAElE;IACA,IAAI,CAACO,QAAQ,GAAG,IAAI,CAACV,WAAW,CAACW,KAAK,CAAC;MACvBC,GAAG,EAAE,EAAE;MACPC,IAAI,EAAE,CAACV,QAAQ,EAAEP,UAAU,CAACkB,QAAQ,CAAC;MACrCC,IAAI,EAAE,CAAC,EAAE,EAAEnB,UAAU,CAACkB,QAAQ,CAAC;MAC/BE,MAAM,EAAE,CAAC,EAAE,EAAEpB,UAAU,CAACkB,QAAQ,CAAC;MACjCG,KAAK,EAAE,CAAC,EAAE,EAAErB,UAAU,CAACkB,QAAQ,CAAC;MAChCI,MAAM,EAAE,CAAC,EAAE,EAAEtB,UAAU,CAACkB,QAAQ,CAAC;MACjCK,SAAS,EAAE,CAAC,EAAE,EAAEvB,UAAU,CAACkB,QAAQ,CAAC;MACpCM,KAAK,EAAE,CAAC,EAAE,EAAExB,UAAU,CAACkB,QAAQ,CAAC;MAChCO,WAAW,EAAE,CAAC,EAAE,EAAEzB,UAAU,CAACkB,QAAQ;KAAG,CAAC;IAEzDN,OAAO,CAACC,GAAG,CAAC,8DAA8D,GAAGN,QAAQ,GAAG,KAAK,CAAC;IAC9F,IAAI,CAACF,WAAW,CAACqB,OAAO,CAACnB,QAAQ,CAAC,CAC3BoB,IAAI,CAAGC,IAAQ,IAAI;MACEhB,OAAO,CAACC,GAAG,CAACe,IAAI,CAAC;MACjB,IAAI,CAACd,QAAQ,CAACe,UAAU,CAACD,IAAI,CAAC,CAAC,CAAC,CAAC;IACvD,CAAC,CAAC;EACV;EAGFE,QAAQ;IACP,IAAI,CAACC,SAAS,GAAG,IAAI;IAErB,IAAI,IAAI,CAACjB,QAAQ,CAACkB,KAAK,EAAE;MAClB,IAAI,CAAC3B,WAAW,CAAC4B,UAAU,CAAC,IAAI,CAACnB,QAAQ,CAACoB,KAAK,CAAC,CAC/BP,IAAI,CAAGC,IAAQ,IAAI;QACZhB,OAAO,CAACC,GAAG,CAACe,IAAI,CAAC;QACjB,IAAI,CAACzB,MAAM,CAACQ,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;MAClC,CAAC,CAAC;;EAE1B;;AA/CaV,iBAAiB;mBAAjBA,iBAAiB;AAAA;AAAjBA,iBAAiB;QAAjBA,iBAAiB;EAAAkC;EAAAC;EAAAC;EAAAC;IAAA;MCX9BC,yBAAG;MAAAA,gCAAgB;MAAAA,iBAAI","names":["FormGroup","Validators","EditTripComponent","constructor","router","formBuilder","tripService","ngOnInit","tripCode","localStorage","getItem","alert","navigate","console","log","editForm","group","_id","code","required","name","length","start","resort","perPerson","image","description","getTrip","then","data","patchValue","onSubmit","submitted","valid","updateTrip","value","selectors","decls","vars","template","i0"],"sourceRoot":"","sources":["C:\\Users\\authe\\OneDrive\\Desktop\\Travlr Stuff\\CS465\\app_admin\\src\\app\\edit-trip\\edit-trip.component.ts","C:\\Users\\authe\\OneDrive\\Desktop\\Travlr Stuff\\CS465\\app_admin\\src\\app\\edit-trip\\edit-trip.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Trip } from '../models/Trip';\nimport { FormBuilder, FormGroup, Validators } from \"@angular/forms\";\nimport { TripDataService } from '../services/trip-data.service';\n\n@Component({\n  selector: 'app-edit-trip',\n  templateUrl: './edit-trip.component.html',\n  styleUrls: ['./edit-trip.component.css']\n})\nexport class EditTripComponent {\n  editForm: FormGroup = new FormGroup<any>({});\n  submitted = false;\n\n  constructor(private router: Router, private formBuilder: FormBuilder, private tripService: TripDataService) {}\n\nngOnInit() {\n    // retrieve stashed tripId\n    let tripCode = localStorage.getItem(\"tripCode\");\n    if (!tripCode) {\n      alert(\"Something wrong, couldn't find where I stashed tripCode!\");\n      this.router.navigate(['']);\n      return;\n    }\n    console.log('EditTripComponent#onInit found tripCode ' + tripCode);\n\n    // initialize form\n    this.editForm = this.formBuilder.group({\n                    _id: [],\n                    code: [tripCode, Validators.required],\n                    name: ['', Validators.required],\n                    length: ['', Validators.required],\n                    start: ['', Validators.required],\n                    resort: ['', Validators.required],\n                    perPerson: ['', Validators.required],\n                    image: ['', Validators.required],\n                    description: ['', Validators.required] });\n\n    console.log('[EditTripComponent.onInit calling TripDataService.getTrip(\\'' + tripCode + '\\')');\n    this.tripService.getTrip(tripCode)\n          .then( (data:any) => { \n                                console.log(data);\n                                this.editForm.patchValue(data[0]);\n          });\n  }\n\n\nonSubmit() {\n this.submitted = true;\n\n if (this.editForm.valid) {\n        this.tripService.updateTrip(this.editForm.value)\n                        .then( (data:any) => {\n                                console.log(data);\n                                this.router.navigate(['']);\n                        });\n         }\n}\n}\n","<p>edit-trip works!</p>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}